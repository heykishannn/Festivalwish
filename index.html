<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="dynamicTitle">‡§∞‡§• ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç</title>
    
    <meta property="og:title" content="‡§∞‡§• ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç!" id="ogTitle">
    <meta property="og:description" content="‡§≠‡§ó‡§µ‡§æ‡§® ‡§ú‡§ó‡§®‡•ç‡§®‡§æ‡§• ‡§ï‡•Ä ‡§ï‡•É‡§™‡§æ ‡§Ü‡§™ ‡§™‡§∞ ‡§¨‡§®‡•Ä ‡§∞‡§π‡•á‡•§" id="ogDescription">
    <meta property="og:image" content="https://www.example.com/share-image.jpg"> <!-- Add a default share image URL -->
    <meta property="og:url" content="https://www.example.com"> <!-- Add your website URL -->
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Kalam:wght@700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ff9933, #ffffff, #138808);
            min-height: 100vh; color: #333;
            display: flex; flex-direction: column;
            padding: 20px; position: relative;
            overflow-x: hidden;
        }
        .content {
            width: 100%; max-width: 600px; text-align: center;
            padding: 20px; margin: 0 auto 100px;
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .gif-container { width: auto; max-width: 100%; height: auto; margin: 0 auto 20px; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); border: 3px solid #ff9933; }
        .gif-container img { width: 100%; height: auto; display: block; }
        h1 {
            font-family: 'Kalam', cursive; font-size: 2.5rem; color: #8e44ad;
            margin-bottom: 20px; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        .wish-container {
            margin: 25px 0; padding: 20px;
            background: rgba(255, 255, 255, 0.9); border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); border: 1px solid #ff9933;
        }
        .wish-text { font-size: 1.1rem; line-height: 1.6; margin-bottom: 10px; color: #333; }
        .translate-btn {
            background: #8e44ad; border: none; color: white; font-size: 0.9rem;
            padding: 8px 15px; margin-top: 15px; cursor: pointer; border-radius: 50px;
            font-weight: 500; transition: all 0.3s ease;
        }
        .translate-btn:hover { background: #6c3483; transform: translateY(-2px); }
        .name-input {
            width: 100%; max-width: 400px; padding: 12px 20px; margin: 15px auto;
            border: 1px solid #ddd; border-radius: 50px; font-size: 1rem; background: white;
            text-align: center; display: block; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .name-input::placeholder { color: #888; }
        .buttons-container { display: flex; flex-direction: column; gap: 15px; margin-top: 25px; }
        .action-btn {
            padding: 12px; border: none; border-radius: 50px; font-size: 1rem; font-weight: 500;
            cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;
            margin: 0 auto; width: 100%; max-width: 250px;
        }
        .share-btn { background-color: #25D366; color: white; }
        .copy-btn { background-color: #2196F3; color: white; }
        .action-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); }
        .confirmation {
            margin-top: 15px; padding: 8px; background: rgba(46, 204, 113, 0.3); color: #2ecc71;
            border-radius: 50px; display: none; animation: fadeInOut 2s ease-in-out;
        }
        @keyframes fadeInOut { 0% { opacity: 0; transform: translateY(10px); } 20% { opacity: 1; transform: translateY(0); } 80% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-10px); } }
        .ad-banner {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 50px;
            background-color: #f0f0f0; display: flex; justify-content: center; align-items: center;
            border-top: 1px solid #ddd; z-index: 100;
        }
        .ad-placeholder { width: 320px; height: 50px; background-color: #e0e0e0; display: flex; justify-content: center; align-items: center; color: #888; font-size: 0.8rem; }
        .share-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); z-index: 1000; justify-content: center; align-items: center;
        }
        .share-content { background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px; text-align: center; }
        .share-options { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        .share-option {
            width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center; align-items: center;
            color: white; font-size: 1.5rem; cursor: pointer; transition: transform 0.3s ease;
        }
        .share-option:hover { transform: scale(1.1); }
        .whatsapp { background-color: #25D366; }
        .facebook { background-color: #3b5998; }
        .instagram { background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D); }
        .close-modal {
            margin-top: 20px; padding: 8px 15px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer;
        }
        .flower, .diya, .rangoli {
            position: absolute; font-size: 24px; z-index: -1;
        }
        @keyframes float { 0% { transform: translateY(100vh) rotate(0deg); } 100% { transform: translateY(-100px) rotate(360deg); } }
        @keyframes flicker { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; transform: scale(1.1); } }
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .wish-text { font-size: 1rem; }
            .name-input { padding: 10px 15px; }
        }
    </style>
</head>
<body>
    <script type='text/javascript' src='//pl26859944.profitableratecpm.com/0d/45/39/0d4539f09727c641fc77330a16feaa38.js'></script>

    <audio id="festivalMusic" loop>
        <source src="festival.mp3" type="audio/mpeg">
    </audio>

    <div class="flower" style="left: 10%; animation-duration: 15s;">üå∏</div>
    <div class="flower" style="left: 25%; animation-duration: 20s;">ü™∑</div>
    <div class="flower" style="left: 50%; animation-duration: 18s;">üåº</div>
    <div class="flower" style="left: 75%; animation-duration: 25s;">üå∫</div>
    <div class="flower" style="left: 90%; animation-duration: 22s;">üèµÔ∏è</div>
    
    <div class="diya" style="top: 10%; left: 5%;">ü™î</div>
    <div class="diya" style="top: 15%; right: 10%;">ü™î</div>
    <div class="diya" style="bottom: 30%; left: 15%;">ü™î</div>
    <div class="diya" style="bottom: 25%; right: 5%;">ü™î</div>
    
    <div class="rangoli" style="top: 5%; right: 5%;">üïâÔ∏è</div>
    <div class="rangoli" style="bottom: 15%; left: 5%;">‡•ê</div>

    <div class="content">
        <div class="gif-container">
            <img id="festivalGif" src="festival.gif" alt="Rath Yatra Celebration">
        </div>
        
        <h1 id="pageTitle">‡§∞‡§• ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç üôèüéâ</h1>
        
        <div class="wish-container">
            <div class="wish-text" id="wish1Hindi"></div>
            <div class="wish-text" id="wish1English" style="display: none;"></div>
            <button class="translate-btn" id="translateBtn">Translate to English</button>
        </div>
        
        <div class="wish-container" id="additionalWish1Container" style="display:none;">
            <div class="wish-text" id="wish2Hindi"></div>
            <div class="wish-text" id="wish2English" style="display: none;"></div>
        </div>
        
        <div class="wish-container" id="additionalWish2Container" style="display:none;">
            <div class="wish-text" id="wish3Hindi"></div>
            <div class="wish-text" id="wish3English" style="display: none;"></div>
        </div>

        <input type="text" class="name-input" id="nameInput" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∂‡•Å‡§≠ ‡§®‡§æ‡§Æ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç ‚úçÔ∏è" autocomplete="off">
        
        <div class="buttons-container">
            <button class="action-btn share-btn" id="shareBtn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                </svg>
                ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç üì§
            </button>
            <button class="action-btn copy-btn" id="copyBtn">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                </svg>
                ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡•á‡§Ç üìã
            </button>
        </div>
   
    <div class="ad-banner">
        <div class="ad-placeholder"><script type="text/javascript">
	atOptions = {
		'key' : '8a596a14d2ea184cd9b6372e267b931c',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/8a596a14d2ea184cd9b6372e267b931c/invoke.js"></script></div>
    </div>

    <div class="share-modal" id="shareModal">
        <div class="share-content">
            <h3>‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</h3>
            <p>‡§Ö‡§™‡§®‡•á ‡§¶‡•ã‡§∏‡•ç‡§§‡•ã‡§Ç ‡§î‡§∞ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç</p>
            <div class="share-options">
                <div class="share-option whatsapp" id="whatsappShare"><i class="fab fa-whatsapp"></i></div>
                <div class="share-option facebook" id="facebookShare"><i class="fab fa-facebook-f"></i></div>
                <div class="share-option instagram" id="instagramShare"><i class="fab fa-instagram"></i></div>
            </div>
            <button class="close-modal" id="closeModal">‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <script>
        let db;
        const dbName = "RathYatraDB";
        const storeName = "PageSettings";
        
        function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(dbName, 1);
                request.onerror = function(event) { console.error("IndexedDB error:", event.target.error); reject("Database error"); };
                request.onsuccess = function(event) { db = event.target.result; resolve(db); };
                request.onupgradeneeded = function(event) {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains(storeName)) {
                        db.createObjectStore(storeName, { keyPath: "id" });
                    }
                };
            });
        }
        
        function getSetting(key) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], "readonly");
                const store = transaction.objectStore(storeName);
                const request = store.get(key);
                request.onsuccess = function() { resolve(request.result ? request.result.value : null); };
                request.onerror = function(event) { reject(event.target.error); };
            });
        }
        
        function updateSetting(key, value) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], "readwrite");
                const store = transaction.objectStore(storeName);
                const request = store.put({ id: key, value: value });
                request.onsuccess = function() { resolve(); };
                request.onerror = function(event) { reject(event.target.error); };
            });
        }
        
        const music = document.getElementById("festivalMusic");
        const nameInput = document.getElementById("nameInput");
        const hindiWishDiv = document.getElementById("wish1Hindi");
        const englishWishDiv = document.getElementById("wish1English");
        const additionalWish1Container = document.getElementById("additionalWish1Container");
        const wish2HindiDiv = document.getElementById("wish2Hindi");
        const wish2EnglishDiv = document.getElementById("wish2English");
        const additionalWish2Container = document.getElementById("additionalWish2Container");
        const wish3HindiDiv = document.getElementById("wish3Hindi");
        const wish3EnglishDiv = document.getElementById("wish3English");
        const shareModal = document.getElementById("shareModal");
        const closeModal = document.getElementById("closeModal");
        const whatsappShare = document.getElementById("whatsappShare");
        const facebookShare = document.getElementById("facebookShare");
        const instagramShare = document.getElementById("instagramShare");
        const shareBtn = document.getElementById("shareBtn");
        const copyBtn = document.getElementById("copyBtn");
        const translateBtn = document.getElementById("translateBtn");
        
        let isEnglish = false;

        function playMusic() {
            music.volume = 0.3;
            const playPromise = music.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => { console.log("Music started playing."); })
                .catch(error => { console.log("Autoplay prevented by browser."); });
            }
        }

        function stopMusic() {
            music.pause();
            music.currentTime = 0;
            console.log("Music stopped.");
        }
        
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                // Consider re-enabling playMusic() here if you want it to resume
                // automatically when user switches back to the tab.
            } else {
                stopMusic();
            }
        });

        async function loadSettings() {
            try {
                await initDB();
                
                const title = await getSetting("title");
                const wish1Hindi = await getSetting("wish1Hindi"); const wish1English = await getSetting("wish1English");
                const wish2Hindi = await getSetting("wish2Hindi"); const wish2English = await getSetting("wish2English");
                const wish3Hindi = await getSetting("wish3Hindi"); const wish3English = await getSetting("wish3English");
                const gifUrl = await getSetting("gifUrl"); const musicUrl = await getSetting("musicUrl");
                const shareDesc = await getSetting("shareDescription"); 
                const emojis = await getSetting("emojis");
                
                if (title) { document.getElementById("dynamicTitle").textContent = title; document.getElementById("pageTitle").textContent = title; document.getElementById("ogTitle").setAttribute("content", title); }
                if (wish1Hindi) hindiWishDiv.innerHTML = wish1Hindi; else hindiWishDiv.innerHTML = ''; // Clear if not set
                if (wish1English) englishWishDiv.innerHTML = wish1English; else englishWishDiv.innerHTML = '';

                // Handle additional wishes
                if (wish2Hindi) { wish2HindiDiv.innerHTML = wish2Hindi; additionalWish1Container.style.display = "block"; } else { additionalWish1Container.style.display = "none"; }
                if (wish2English) { wish2EnglishDiv.innerHTML = wish2English; } else { wish2EnglishDiv.innerHTML = ''; }

                if (wish3Hindi) { wish3HindiDiv.innerHTML = wish3Hindi; additionalWish2Container.style.display = "block"; } else { additionalWish2Container.style.display = "none"; }
                if (wish3English) { wish3EnglishDiv.innerHTML = wish3English; } else { wish3EnglishDiv.innerHTML = ''; }

                let finalShareDescription = shareDesc || (wish1Hindi ? wish1Hindi.split("<br><br>")[0] : "‡§∞‡§• ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§∂‡•Å‡§≠‡§ï‡§æ‡§Æ‡§®‡§æ‡§è‡§Ç!");
                document.getElementById("ogDescription").setAttribute("content", finalShareDescription.replace(/<[^>]*>/g, ''));

                if (gifUrl) document.getElementById("festivalGif").src = gifUrl;
                if (musicUrl) music.src = musicUrl; 
                
                // Load emoji settings
                if (emojis) {
                    const updateEmojiElement = (selector, emojiArray, index) => { const element = document.querySelector(selector); if (element && emojiArray && emojiArray[index]) { element.textContent = emojiArray[index]; } };
                    if (emojis.flowers) { updateEmojiElement(".flower:nth-of-type(1)", emojis.flowers, 0); updateEmojiElement(".flower:nth-of-type(2)", emojis.flowers, 1); updateEmojiElement(".flower:nth-of-type(3)", emojis.flowers, 2); updateEmojiElement(".flower:nth-of-type(4)", emojis.flowers, 3); updateEmojiElement(".flower:nth-of-type(5)", emojis.flowers, 4); }
                    if (emojis.diyas) { updateEmojiElement(".diya:nth-of-type(1)", emojis.diyas, 0); updateEmojiElement(".diya:nth-of-type(2)", emojis.diyas, 1); updateEmojiElement(".diya:nth-of-type(3)", emojis.diyas, 2); updateEmojiElement(".diya:nth-of-type(4)", emojis.diyas, 3); }
                    if (emojis.rangolis) { updateEmojiElement(".rangoli:nth-of-type(1)", emojis.rangolis, 0); updateEmojiElement(".rangoli:nth-of-type(2)", emojis.rangolis, 1); }
                }

                playMusic(); 

            } catch (error) {
                console.error("Error loading settings:", error);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();

            translateBtn.addEventListener("click", () => {
                isEnglish = !isEnglish;
                hindiWishDiv.style.display = isEnglish ? 'none' : 'block'; englishWishDiv.style.display = isEnglish ? 'block' : 'none';
                wish2HindiDiv.style.display = isEnglish ? 'none' : 'block'; wish2EnglishDiv.style.display = isEnglish ? 'block' : 'none';
                wish3HindiDiv.style.display = isEnglish ? 'none' : 'block'; wish3EnglishDiv.style.display = isEnglish ? 'block' : 'none';
                translateBtn.textContent = isEnglish ? "Translate to Hindi" : "Translate to English";
            });

            shareBtn.addEventListener("click", () => { shareModal.style.display = "flex"; });
            closeModal.addEventListener("click", () => { shareModal.style.display = "none"; });
            shareModal.addEventListener("click", (e) => { if (e.target === shareModal) { shareModal.style.display = "none"; } });

            whatsappShare.addEventListener('click', () => {
                const name = nameInput.value.trim();
                const greeting = name ? `‡§Æ‡•à‡§Ç ${name} ‡§Ü‡§™‡§ï‡•ã ` : '';
                
                const messageParts = [];
                if (hindiWishDiv.textContent.trim()) messageParts.push(greeting + hindiWishDiv.textContent.trim());
                if (additionalWish1Container.style.display !== "none" && wish2HindiDiv.textContent.trim()) messageParts.push(wish2HindiDiv.textContent.trim());
                if (additionalWish2Container.style.display !== "none" && wish3HindiDiv.textContent.trim()) messageParts.push(wish3HindiDiv.textCon
